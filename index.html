<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="./src/assets/logo_f.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <title>Ahmad Fauzi | Portofolio</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        perspective: 1000px;
        position: relative;
      }
      #starContainer {
        pointer-events: none;
      }
      .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        opacity: 0;
        transition: transform 0.5s ease;
        animation: twinkle 4s infinite ease-in-out;
      }
      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.2;
        }
        50% {
          opacity: 1;
        }
      }
      .meteor {
        position: absolute;
        background: linear-gradient(to bottom right, white, transparent);
        transform-origin: top left;
        pointer-events: none;
      }
    </style>
  </head>

  <body
    class="bg-slate-950 text-slate-400 antialiased selection:bg-teal-300 selection:text-teal-900"
  >
    <div id="starContainer" class="fixed overflow-hidden top-0 left-0 w-full h-full"></div>
    <div
      id="app"
      class="relative z-10 min-h-screen overflow-x-hidden overflow-y-auto"
    ></div>

    <script>
      const starContainer = document.getElementById("starContainer");
      const starCount = 180; // Sedikit dikurangi dari 190
      const stars = [];
      let mouseX = 0,
        mouseY = 0;

      function createStar() {
        const star = document.createElement("div");
        star.classList.add("star");
        resetStar(star);
        starContainer.appendChild(star);
        stars.push(star);
      }

      function resetStar(star) {
        const size = Math.random() * 3 + 1;
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        star.zIndex = Math.floor(Math.random() * 200) - 100;
        star.speed = Math.random() * 0.15 + 0.05; // Sedikit diperlambat
        star.style.transform = `translateZ(${star.zIndex}px)`;
        star.style.animationDelay = `${Math.random() * 4}s`;
      }

      function updateStar(star) {
        let top = parseFloat(star.style.top);
        top += star.speed;
        if (top > 100) {
          resetStar(star);
          top = -5;
        }
        star.style.top = `${top}%`;

        const rect = star.getBoundingClientRect();
        const starX = (rect.left + rect.width / 2) / window.innerWidth;
        const starY = (rect.top + rect.height / 2) / window.innerHeight;

        const dx = mouseX - starX;
        const dy = mouseY - starY;
        const distance = Math.sqrt(dx * dx + dy * dy);

        const maxDistance = 0.15;
        const force = (maxDistance - distance) / maxDistance;

        if (force > 0) {
          const scale = 1 + force * 1.5; // Sedikit dikurangi
          const moveX = dx * force * 15; // Sedikit dikurangi
          const moveY = dy * force * 15; // Sedikit dikurangi
          star.style.transform = `translateZ(${star.zIndex}px) translate(${moveX}px, ${moveY}px) scale(${scale})`;
        } else {
          star.style.transform = `translateZ(${star.zIndex}px)`;
        }
      }

      function createMeteor() {
        const meteor = document.createElement("div");
        meteor.classList.add("meteor");
        const startX = Math.random() * 60 + 20;
        const startY = -3;
        meteor.style.left = `${startX}%`;
        meteor.style.top = `${startY}%`;
        const angle = Math.random() * 20 + 20;
        const length = Math.random() * 120 + 80; // Sedikit dikurangi
        meteor.style.width = `${length}px`;
        meteor.style.height = "2px";
        meteor.style.transform = `rotate(${angle}deg)`;
        starContainer.appendChild(meteor);

        const duration = Math.random() * 400 + 400; // Sedikit dipercepat
        meteor.animate(
          [
            { transform: `rotate(${angle}deg) translateX(0)`, opacity: 1 },
            {
              transform: `rotate(${angle}deg) translateX(${
                window.innerWidth + length
              }px)`,
              opacity: 0,
            },
          ],
          {
            duration: duration,
            easing: "linear",
          }
        ).onfinish = () => {
          starContainer.removeChild(meteor);
        };
      }

      for (let i = 0; i < starCount; i++) {
        createStar();
      }

      function animateStars() {
        stars.forEach(updateStar);
        if (Math.random() < 0.015) {
          // Sedikit dikurangi frekuensinya
          createMeteor();
        }
        requestAnimationFrame(animateStars);
      }

      animateStars();

      document.addEventListener(
        "mousemove",
        (e) => {
          mouseX = e.clientX / window.innerWidth;
          mouseY = e.clientY / window.innerHeight;
        },
        { passive: true }
      );
    </script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>
    <script type="module" src="/src/main.js"></script>
    <script
      src="https://kit.fontawesome.com/cc0bc0809d.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
